**京东登录项目接口文档**

**所需的相关项目：**

- Python3
- Selenium
- Chrome
- 与Chrome版本对应的Chromdriver
- Flask

**搭建教程：**

~~其实也没有啥教程，只要相关的项目 依赖安装好后 只需要更改文件内对应的变量就可以启动了。~~

首先确定你青龙的版本，因为新版本的系统设置里面可以添加第三方的应用 老版本的却没有----然后按照对应版本来打开相关青龙api的py文件修改里面变量 （由于青龙的限制，APi好像只接受127.0.0.1的请求，所以要么搞反代要么就地址填写127.0.0.1 #不过并没有尝试过）

正常使用需要两个文件 占用对应的8080、8081端口(推荐使用screen来运行)，如果有冲突可自行修改，下面也都是按照默认来演示的 如果需要公网访问改为0.0.0.0，然后请求地址就改成对应服务器的IP **(****当然不推荐这样干****)**

**请求实例：**

- **青龙Api部分：**

1. **加入/更新cookie：**

请求地址：127.0.0.1:8081/ql

请求方式： POST

请求格式：form表单

请求参数：

| **参数名** | **必填** | **字段类型** | **描述** |
| --- | --- | --- | --- |
| pin | 是 | String | Cookie内的pt\_pin字段，用于搜索是否已存在对应用户 |
| cookie | 是 | String | 抓包获取到的Cookie，包含pt\_key和pt\_pin字段 |

成功会返回带有&quot;\_id&quot;字段的一个json 前端可以利用这个来判断登录成功

理论不会有失败的返回，除非文件的变量位置没有更改，或者改错了导致的Api认证失败返回401或者超时

由于咱这还不需要管理的面板，不需要改名啥的所以青龙的api我只搞了一个加Cookie的接口，后期看情况。 ~~可能性不大，不用期待了。~~

- **登录部分：**

1. **获取验证码：**

请求地址：127.0.0.1:8080/login

请求方式：POST

请求格式：json

请求参数：

| **参数名** | **必填** | **字段类型** | **描述** |
| --- | --- | --- | --- |
| tel | 是 | String | 参数值为手机号码 |
| id | 是 | String | 由于是按照该参数来判断相关操作所以获取验证码的时候该参数务必为&quot; **tel**&quot; |

返回：

我好像没有写失败的返回，成功返回ture 失败可能会返回乱七八糟的东西并且不返回200代码，也可以用这来判断是否提交过去手机号

2. **提交验证码并登录：**

请求地址：127.0.0.1:8080/login

请求方式：POST

请求格式：json

请求参数：

| **参数名** | **必填** | **字段类型** | **描述** |
| --- | --- | --- | --- |
| tel | 是 | String | 参数值为手机号码 |
| id | 是 | String | 参数值为手机号码 |
| yzm | 是 | String | 参数值为验证码 |

返回：

由于是直接提交到上面那个青龙API所以返回数据是上面青龙API返回的数据。（务必保持两个同时使用）

3. **清理资源：**

请求地址：127.0.0.1:8080/restart

请求方式：GET

请求格式：无

请求参数：无

成功后返回&quot;ok&quot;

**注：**

- **为确保正常使用，最好还是隔段时间重启一下两个程序**
- **由于是使用Chrome所以会比较占用资源，最好经常的清理资源**
